<!DOCTYPE HTML>
<html lang="ru" class="light" dir="">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Двоичная куча - is-algo</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/style.css">
        <link rel="stylesheet" href=".././mdbook-admonish.css">

    </head>
    <body class="no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../dp/index.html"><strong aria-hidden="true">1.</strong> Динамическое программирование</a></li><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">2.</strong> Введение</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../how-to-smth/judje.html"><strong aria-hidden="true">2.1.</strong> Тестирующая система</a></li><li class="chapter-item expanded "><a href="../how-to-smth/how-to-read.html"><strong aria-hidden="true">2.2.</strong> Как читать</a></li><li class="chapter-item expanded "><a href="../how-to-smth/how-to-solve.html"><strong aria-hidden="true">2.3.</strong> Как придумывать</a></li><li class="chapter-item expanded "><a href="../how-to-smth/how-to-testing.html"><strong aria-hidden="true">2.4.</strong> Как тестировать</a></li></ol></li><li class="chapter-item expanded "><a href="../CONTRIBUTING.html"><strong aria-hidden="true">3.</strong> Сделайте вклад</a></li><li class="chapter-item expanded "><a href="../history/history.html"><strong aria-hidden="true">4.</strong> История разработки проекта</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../history/tasks-management.html"><strong aria-hidden="true">4.1.</strong> Структурирование задач</a></li><li class="chapter-item expanded "><a href="../history/toc-plugin.html"><strong aria-hidden="true">4.2.</strong> Оглавление страницы</a></li></ol></li><li class="chapter-item expanded "><a href="../getting-started/getting-started.html"><strong aria-hidden="true">5.</strong> Начало работы</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/installation.html"><strong aria-hidden="true">5.1.</strong> Установка</a></li><li class="chapter-item expanded "><a href="../getting-started/code-editor.html"><strong aria-hidden="true">5.2.</strong> Редактор кода</a></li><li class="chapter-item expanded "><a href="../getting-started/examples.html"><strong aria-hidden="true">5.3.</strong> Решение задачи</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/cpp_base.html"><strong aria-hidden="true">6.</strong> Основы языка C++</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/data-types.html"><strong aria-hidden="true">6.1.</strong> Типы данных</a></li><li class="chapter-item expanded "><a href="../programming/io.html"><strong aria-hidden="true">6.2.</strong> Ввод и вывод</a></li><li class="chapter-item expanded "><a href="../programming/branching.html"><strong aria-hidden="true">6.3.</strong> Ветвление</a></li><li class="chapter-item expanded "><a href="../programming/loops.html"><strong aria-hidden="true">6.4.</strong> Циклы</a></li><li class="chapter-item expanded "><a href="../programming/array_types/array.html"><strong aria-hidden="true">6.5.</strong> Массивы</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/array_types/static-array.html"><strong aria-hidden="true">6.5.1.</strong> Статические массивы</a></li><li class="chapter-item expanded "><a href="../programming/array_types/dynamic-array.html"><strong aria-hidden="true">6.5.2.</strong> Динамические массивы</a></li><li class="chapter-item expanded "><a href="../programming/array_types/VLA.html"><strong aria-hidden="true">6.5.3.</strong> VLA</a></li><li class="chapter-item expanded "><a href="../programming/array_types/vector.html"><strong aria-hidden="true">6.5.4.</strong> std::vector</a></li><li class="chapter-item expanded "><a href="../programming/array_types/compare-arrays.html"><strong aria-hidden="true">6.5.5.</strong> Что выбрать?</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/functions.html"><strong aria-hidden="true">6.6.</strong> Функции</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../programming/params-to-func.html"><strong aria-hidden="true">6.6.1.</strong> Передача параметров в функцию</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/links-and-pointers.html"><strong aria-hidden="true">6.7.</strong> Ссылки и указатели</a></li></ol></li><li class="chapter-item expanded "><a href="../programming/mem.html"><strong aria-hidden="true">7.</strong> Память</a></li><li class="chapter-item expanded "><a href="../algorithms/greedy/index.html"><strong aria-hidden="true">8.</strong> Жадные алгоритмы</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../algorithms/greedy/intro.html"><strong aria-hidden="true">8.1.</strong> Введение</a></li></ol></li><li class="chapter-item expanded "><a href="../algorithms/asymptotics.html"><strong aria-hidden="true">9.</strong> Асимптотика</a></li><li class="chapter-item expanded "><a href="../algorithms/sorts/sorts.html"><strong aria-hidden="true">10.</strong> Сортировки</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../algorithms/sorts/bubble-sort.html"><strong aria-hidden="true">10.1.</strong> "Пузырьковая" сортировка</a></li><li class="chapter-item expanded "><a href="../algorithms/sorts/insertion-sort.html"><strong aria-hidden="true">10.2.</strong> Сортировка вставкой</a></li><li class="chapter-item expanded "><a href="../algorithms/sorts/selection-sort.html"><strong aria-hidden="true">10.3.</strong> "Выборочная" сортировка</a></li><li class="chapter-item expanded "><a href="../algorithms/sorts/merge-sort.html"><strong aria-hidden="true">10.4.</strong> Сортировка слиянием</a></li><li class="chapter-item expanded "><a href="../algorithms/sorts/quick-sort.html"><strong aria-hidden="true">10.5.</strong> Быстрая сортировка</a></li><li class="chapter-item expanded "><a href="../algorithms/sorts/counting-sort.html"><strong aria-hidden="true">10.6.</strong> Сортировка подсчётом</a></li></ol></li><li class="chapter-item expanded "><a href="../data-structures/linked_lists.html"><strong aria-hidden="true">11.</strong> Связанные списки</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../data-structures/my_Stack.html"><strong aria-hidden="true">11.1.</strong> Стек</a></li><li class="chapter-item expanded "><a href="../data-structures/queue_done.html"><strong aria-hidden="true">11.2.</strong> Очередь</a></li></ol></li><li class="chapter-item expanded "><a href="../data-structures/bin_heap.html" class="active"><strong aria-hidden="true">12.</strong> Двоичная куча</a></li><li class="chapter-item expanded "><a href="../algorithms/binary-search/index.html"><strong aria-hidden="true">13.</strong> Двоичный поиск</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../algorithms/binary-search/main.html"><strong aria-hidden="true">13.1.</strong> Целочисленный двоичный поиск</a></li><li class="chapter-item expanded "><a href="../algorithms/binary-search/real.html"><strong aria-hidden="true">13.2.</strong> Вещественный поиск</a></li><li class="chapter-item expanded "><a href="../algorithms/binary-search/answer.html"><strong aria-hidden="true">13.3.</strong> Двоичный поиск по ответу</a></li><li class="chapter-item expanded "><a href="../algorithms/binary-search/minimax.html"><strong aria-hidden="true">13.4.</strong> Минимакс</a></li><li class="chapter-item expanded "><a href="../algorithms/binary-search/best_practices.html"><strong aria-hidden="true">13.5.</strong> best practices</a></li><li class="chapter-item expanded "><a href="../algorithms/binary-search/tasks.html"><strong aria-hidden="true">13.6.</strong> Примеры задач</a></li></ol></li><li class="chapter-item expanded "><a href="../data-structures/BST/bst.html"><strong aria-hidden="true">14.</strong> Двоичное дерево поиска</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../data-structures/BST/avl.html"><strong aria-hidden="true">14.1.</strong> AVL</a></li><li class="chapter-item expanded "><a href="../data-structures/BST/treap.html"><strong aria-hidden="true">14.2.</strong> Декартово дерево</a></li></ol></li><li class="chapter-item expanded "><a href="../tasks/index.html"><strong aria-hidden="true">15.</strong> Решаем задачи</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tasks/different-odd.html"><strong aria-hidden="true">15.1.</strong> Другая чётность</a></li><li class="chapter-item expanded "><a href="../tasks/sum-of-factorials.html"><strong aria-hidden="true">15.2.</strong> Сумма факториалов</a></li><li class="chapter-item expanded "><a href="../tasks/longest-easy.html"><strong aria-hidden="true">15.3.</strong> Наибольший отрезок</a></li><li class="chapter-item expanded "><a href="../tasks/monitor.html"><strong aria-hidden="true">15.4.</strong> Монитор</a></li><li class="chapter-item expanded "><a href="../tasks/maximize-median.html"><strong aria-hidden="true">15.5.</strong> Максимальная медиана</a></li><li class="chapter-item expanded "><a href="../tasks/equal-in-range.html"><strong aria-hidden="true">15.6.</strong> Равный на отрезке</a></li><li class="chapter-item expanded "><a href="../tasks/grass.html"><strong aria-hidden="true">15.7.</strong> Посев травы</a></li><li class="chapter-item expanded "><a href="../tasks/string-game.html"><strong aria-hidden="true">15.8.</strong> Игра на строке</a></li><li class="chapter-item expanded "><a href="../tasks/max-distance.html"><strong aria-hidden="true">15.9.</strong> Максимальное расстояние</a></li><li class="chapter-item expanded "><a href="../tasks/cnt-segments-segments.html"><strong aria-hidden="true">15.10.</strong> Опасные группы отрезков</a></li><li class="chapter-item expanded "><a href="../tasks/between-two-arrays.html"><strong aria-hidden="true">15.11.</strong> Между Двумя Массивами</a></li><li class="chapter-item expanded "><a href="../tasks/common-subsequence.html"><strong aria-hidden="true">15.12.</strong> Общие Подпоследовательности</a></li><li class="chapter-item expanded "><a href="../tasks/bricks.html"><strong aria-hidden="true">15.13.</strong> Цветные Кирпичики</a></li><li class="chapter-item expanded "><a href="../tasks/reordering.html"><strong aria-hidden="true">15.14.</strong> Переупорядочивание</a></li><li class="chapter-item expanded "><a href="../tasks/is-sorted.html"><strong aria-hidden="true">15.15.</strong> Отсортирована?</a></li><li class="chapter-item expanded "><a href="../tasks/colored-stripe.html"><strong aria-hidden="true">15.16.</strong> Цветная Полоска</a></li><li class="chapter-item expanded "><a href="../tasks/red-blue-tree.html"><strong aria-hidden="true">15.17.</strong> Красное И Синее Дерево</a></li><li class="chapter-item expanded "><a href="../tasks/nice-binary-matrix.html"><strong aria-hidden="true">15.18.</strong> Хорошая Бинарная Матрица</a></li><li class="chapter-item expanded "><a href="../tasks/square-subsets.html"><strong aria-hidden="true">15.19.</strong> Квадратные Подмножества</a></li><li class="chapter-item expanded "><a href="../tasks/compatible-numbers.html"><strong aria-hidden="true">15.20.</strong> Совместимые Числа</a></li></ol></li><li class="chapter-item expanded "><a href="../tasks/task-about-segments.html"><strong aria-hidden="true">16.</strong> Задачи про отрезки</a></li><li class="chapter-item expanded "><a href="../stl/stl.html"><strong aria-hidden="true">17.</strong> stl</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">is-algo</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/9kin/is-algo" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/9kin/is-algo/edit/master/src/data-structures/bin_heap.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="Куча"><a class="header" href="#Куча">Куча</a></h1>
<blockquote>
<p>Куча (англ. heap) - это структура данных, которая используется для хранения и управления набором элементов в порядке возрастания или убывания. Она представляет собой дерево, где каждый узел имеет значение, которое больше или равно значениям его потомков. Куча может быть реализована как массив, где каждый элемент является узлом дерева, или как дерево, где каждый узел имеет максимальное количество дочерних узлов.</p>
</blockquote>
<ul>
<li>Если любой узел всегда больше дочернего узла (узлов), а ключ корневого узла является наибольшим среди всех остальных узлов, это <strong>max-куча</strong>.</li>
<li>Если любой узел всегда меньше дочернего узла (узлов), а ключ корневого узла является наименьшим среди всех остальных узлов, это <strong>min-куча</strong>.</li>
</ul>
<p><img src="./heaps.jpg" alt="куча" /></p>
<h3 id="Для-чего-нужны-кучи"><a class="header" href="#Для-чего-нужны-кучи">Для чего нужны кучи:</a></h3>
<p>Кучи позволяют быстро находить минимальный или максимальный элемент в наборе данных, а также быстро добавлять и удалять элементы. </p>
<h3 id="Плюсы-куч"><a class="header" href="#Плюсы-куч">Плюсы куч:</a></h3>
<ol>
<li>Эффективно работают для операций добавления, удаления и поиска элементов.</li>
<li>Просты в реализации и поддержке.</li>
<li>Подходят для хранения больших объемов данных.</li>
</ol>
<h3 id="Минусы-куч"><a class="header" href="#Минусы-куч">Минусы куч:</a></h3>
<ol>
<li>Не эффективно работают для операций сортировки и поиска в случае неоднородных данных.</li>
<li>Не подходят для хранения данных, которые часто меняются.</li>
</ol>
<h2 id="Классическая-куча-поддерживает-следующие-операции"><a class="header" href="#Классическая-куча-поддерживает-следующие-операции">Классическая куча поддерживает следующие операции:</a></h2>
<ol>
<li>Добавить элемент (Сложность: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>)</li>
<li>Извлечь максимальный элемент (Сложность: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>) </li>
</ol>
<h2 id="Реализация-кучи-максимума"><a class="header" href="#Реализация-кучи-максимума">Реализация кучи максимума</a></h2>
<p>Для начала создадим класс для кучи.</p>
<pre><code class="language-cpp">class MaxHeap {
  int* heap;  // указатель на массив для хранения элементов кучи
  int size;   // количество элементов в куче
  int capacity;  // емкость кучи
}
</code></pre>
<p>Следующим шагом будет создания метода insert, который будет добавлять элемент в кучу и перестраивать ее.</p>
<pre><code class="language-cpp">void insert(int value) {  // метод для добавления элемента в кучу
  if (size == capacity) {  // если куча заполнена
    throw &quot;Heap is full&quot;;  // выбрасываем исключение
  }
  heap[size] = value;  // добавляем элемент в кучу
  int index = size;  // устанавливаем индекс для сравнения
  while (index &gt; 0 &amp;&amp; heap[(index - 1) / 2] &lt;
                          heap[index]) {  // пока не достигнут корень кучи
    swap(heap[index], heap[(index - 1) / 2]);  // меняем местами текущий элемент
                                               // и его родительский элемент
    index = (index - 1) / 2;  // переходим к родительскому элементу
  }
  size++;  // увеличиваем количество элементов в куче
}
</code></pre>
<p>Далее создаем метод extractMax, который будет извлекать максимальный элемент из кучи.</p>
<pre><code class="language-cpp">int extractMax() {
  if (size == 0) {          // если куча пуста
    throw &quot;Heap is empty&quot;;  // выбрасываем исключение
  }
  int max = heap[0];  // сохраняем максимальный элемент
  heap[0] =
      heap[size -
           1];  // заменяем максимальный элемент на последний элемент в куче
  size--;  // уменьшаем количество элементов в куче
  int index = 0;  // устанавливаем индекс для сравнения
  while (index * 2 + 1 &lt; size) {  // пока есть дочерние элементы
    int childIndex =
        index * 2 + 1;  // определяем индекс левого дочернего элемента
    if (childIndex + 1 &lt; size &amp;&amp;
        heap[childIndex + 1] &gt;
            heap[childIndex]) {  // если есть правый дочерний элемент и он
                                 // больше левого
      childIndex++;  // увеличиваем индекс на правый дочерний элемент
    }
    if (heap[index] &gt;= heap[childIndex]) {  // если текущий элемент больше или
                                            // равен дочернему элементу
      break;  // выходим из цикла
    }
    swap(
        heap[index],
        heap[childIndex]);  // меняем местами текущий элемент и дочерний элемент
    index = childIndex;  // переходим к дочернему элементу
  }
  return max;  // возвращаем максимальный элемент
}

</code></pre>
<p>Теперь создадим метод getSize, который возвращает количество  элементов в куче.</p>
<pre><code class="language-cpp">int getSize() { return size; }
</code></pre>
<h2 id="Код-полностью"><a class="header" href="#Код-полностью">Код полностью</a></h2>
<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;

class MaxHeap {
 private:
  int* heap;     // Указатель на массив кучи
  int size;      // Текущий размер кучи
  int capacity;  // Емкость кучи (максимальный размер)

 public:
  MaxHeap(int capacity) {  // Конструктор класса, инициализирует кучу
    this-&gt;capacity = capacity;  // Сохраняем емкость кучи
    heap = new int[capacity];  // Выделяем память для массива кучи
    size = 0;                  // Изначально куча пуста
  }

  ~MaxHeap() {  // Деструктор класса, освобождает память при уничтожении объекта
    delete[] heap;
  }

  void insert(int value) {  // Вставка элемента в кучу
    if (size == capacity) {  // Если куча полная, выбрасываем исключение
      throw &quot;Heap is full&quot;;
    }
    heap[size] = value;  // Вставляем элемент в конец кучи
    int index = size;  // Индекс вставленного элемента
    while (index &gt; 0 &amp;&amp; heap[(index - 1) / 2] &lt;
                            heap[index]) {  // Пока не нарушается свойство кучи
      swap(heap[index],
           heap[(index - 1) / 2]);  // Меняем элемент с его родителем
      index = (index - 1) / 2;  // Переходим к родителю
    }
    size++;  // Увеличиваем размер кучи
  }

  int extractMax() {  // Извлечение максимального элемента из кучи
    if (size == 0) {  // Если куча пуста, выбрасываем исключение
      throw &quot;Heap is empty&quot;;
    }
    int max = heap[0];  // Максимальный элемент - корень кучи
    heap[0] = heap[size - 1];  // Перемещаем последний элемент на место корня
    size--;                    // Уменьшаем размер кучи
    int index = 0;             // Индекс текущего элемента
    while (index * 2 + 1 &lt; size) {  // Пока есть левый потомок
      int childIndex = index * 2 + 1;  // Индекс левого потомка
      if (childIndex + 1 &lt; size &amp;&amp;
          heap[childIndex + 1] &gt;
              heap[childIndex]) {  // Если есть правый потомок и он больше
                                   // левого
        childIndex++;  // Выбираем правого потомка
      }
      if (heap[index] &gt;=
          heap[childIndex]) {  // Если свойство кучи не нарушается
        break;
      }
      swap(heap[index],
           heap[childIndex]);  // Меняем элемент с максимальным потомком
      index = childIndex;  // Переходим к потомку
    }
    return max;  // Возвращаем извлеченный максимальный элемент
  }

  int getSize() {  // Возвращает текущий размер кучи
    return size;
  }

  bool isEmpty() {  // Проверяет, пуста ли куча
    return size == 0;
  }
};

int main() {
  MaxHeap heap(10);  // Создаем объект кучи с емкостью 10
  heap.insert(3);  // Вставляем элементы
  heap.insert(1);
  heap.insert(4);
  heap.insert(1);
  heap.insert(5);
  heap.insert(9);
  heap.insert(2);
  heap.insert(6);
  heap.insert(5);
  cout &lt;&lt; &quot;Max: &quot; &lt;&lt; heap.extractMax()
       &lt;&lt; &quot;\n&quot;;  // Извлекаем максимальный элемент
  cout &lt;&lt; &quot;Size: &quot; &lt;&lt; heap.getSize() &lt;&lt; &quot;\n&quot;;  // Выводим размер кучи
  cout &lt;&lt; &quot;Max: &quot; &lt;&lt; heap.extractMax()
       &lt;&lt; &quot;\n&quot;;  // Извлекаем максимальный элемент
  cout &lt;&lt; &quot;Size: &quot; &lt;&lt; heap.getSize() &lt;&lt; &quot;\n&quot;;  // Выводим размер кучи
  cout &lt;&lt; &quot;Empty: &quot; &lt;&lt; heap.isEmpty() &lt;&lt; &quot;\n&quot;;  // Проверяем, пуста ли куча
}

</code></pre>
<p>Вывод:</p>
<pre><code class="language-bash">Max : 9
Size : 8
Max : 6
Size : 7
Empty : 0
</code></pre>
<footer id="last-change">Last change: 2023-10-24, commit: <a href="https://github.com/9kin/is-algo/commit/d3abe52">d3abe52</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../data-structures/queue_done.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../algorithms/binary-search/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../data-structures/queue_done.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../algorithms/binary-search/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/sidebar.js"></script>


    </div>
    </body>
</html>
